1. 如果我今天有一個股票專案，目前主要要的功能有
    - 每天更新股票列表
    - 依據股票列表抓取還原日線的歷史資料，並且每日更新最新的資料
    - 依據歷史資料計算出均線數值
    - 依據均線數值找出當前線型漂亮的股票
    針對這些項目，會建議怎麼設計架構，請用繁中回答
2. 依據以下指示改動調整
    - 幫我移除緩存的部分
    - 前端的部分，我會提供一個admin的專案，放在frontend資料夾，前端直接用這個修改即可
    - 需要uiux agent幫我設計高效好用的功能介面
    - docker-compose.yml不要加入version，另外PORT用.env統一管理，對外PORT請寫在最上面
    - 依據這些項目列出tasks寫入docs\tasks.md中，這個請pm agent處理
    - 請tdd mentor針對項目撰寫完整的測試項目
    - 可以的話，需要代理的部分請同步執行
3. 我看原先的討論不是後端要用python+fastapi嗎? 是pm agent搞錯了嗎? 幫我更新tasks.md
4. 請backend agent先把1.1完成，我把.env設定完後，再繼續執行後續
5. 是不是沒有幫我把對外PORT一起放到最上面，我是要放到.env的最上面
6. 幫我檢查配置是否都正確，並完成phase1的所有項目，並且在完成後，更新tasks的狀態，phase1請直接執行即可，不用用到sub agent，狀態是不是都沒有更新，另外有幫我啟用docker確認執行狀態了嗎
7. 幫我優先實作3.3股票擷取模組，一共有兩個項目，先處理擷取股票列表的功能，只要上市上櫃即可，另外我要非0開頭且四碼的股票就好，其餘的不需要，然後需要請tdd agent先撰寫好測試，再實作功能，實作功能完成後需要通過測試才算完成，完成後請更新tasks的狀態，目前看到你完成了，但是我怎麼沒有看到任何docker服務打開，這樣我怎麼知道要去哪支API確認資料是否寫入資料庫了，TDD也沒有寫到這點，是否漏了，幫我補上
8. 我測試了docker啟用根本就有問題，請幫我確認是哪裡的問題，如果是套件，請告訴我它的用途，讓我決定是否要保留，celery_flow沒有正常啟用
9. 我執行了http://localhost:9121/api/v1/sync/stocks/count，出現Invalid host header，請幫我加入測試項目，並排出該項錯誤
10. 幫我寫一支GET的api端點，可以爬取當前的股票列表更新進入資料庫中，確認tasks中是否有這個項目，沒有的話幫我加入，有的話幫我撰寫TDD測試後，開始執行，並確保完成TDD測試，上櫃股票的，目前只有看到上市股票
11. 幫我建置取得還原日線資料的功能，他是透過爬蟲的方式取得資料，先幫我建置一個測試用的資料夾，等功能完成後在把它移至專案中對應的地方，一共有八個連結http://fubon-ebrokerdj.fbs.com.tw/、http://justdata.moneydj.com/、http://jdata.yuanta.com.tw/、http://moneydj.emega.com.tw/、http://djfubonholdingfund.fbs.com.tw/、https://sjmain.esunsec.com.tw/、http://kgieworld.moneydj.com/、http://newjust.masterlink.com.tw/，後面加入z/BCD/czkc1.djbcd?a={股票代號}&b=A&c=2880&E=1&ver=5，可以取得歷史資料，幫我解析資料，並存入資料庫，請先幫我用2330處理，先確認一筆資料正確再處理其他的，幫我建置API，執行流程為，先更新tasks.md，並撰寫tdd測試，最後才執行，執行後依據tdd測試，直到通過為止
12. 我透過這個網址是無法使用的http://localhost:9127/api/v1/data/daily/2330，幫我確認，回答請一律用zh_tw
13. Failed to fetch daily data for stock 2330. The broker data sources    
   may be unavailable.，回傳這個根本沒過啊，請確認有正確取得資料，TDD請確實寫好
14. 完成以下功能
    - 回答一律用zh_tw，寫入CLAUDE.md
    - 執行流程只要是開發新功能，都先幫我寫TDD，更新tasks，然後在執行功能撰寫，完成後執行測試，直到通過測試才算完成，寫入CLAUDE.md
    - 請幫我寫一隻API，可以查詢系統中，特定股票的歷史資料，用GET執行
    - 請幫我view過專案，從14點昨天做到一半的地方往下完成，然後測試相關的請不要寫在根目錄，用一個test資料夾裝起來就好
15. 幫我寫一支GET的api端點，可以爬取當前的股票列表更新進入資料庫中，，確認tasks中是否有這個項目，沒有的話幫我加入，有的話幫我撰寫TDD測試後，開始執行，並確保完成TDD測試，上櫃股票的，目前只有看到上市股票
16. 目前好像沒有看到前端專案，幫我一併調整前端專案，要把目前已經做完的後端功能都上上去，需要有按鈕可以打通API
17. 目前我用http://localhost:3000去打api會出現CORS的問題，每一支API都是，幫我排除這個問題並執行add commit push
18. 我點/stock/list的檢查數量出現"資料庫中共有 undefined 檔股票"，是不是前端與API的取直沒有對應好
19. 有正確抓到資料庫的檔案，但為甚麼列表只有顯示三檔
20. 完成以下功能
    - 股票列表的部分幫我加入一個重新載入的按鈕，點下去會載入資料庫中的所有股票近來
    - 資料管理的歷史資料與資料更新為甚麼都沒有東西，我記得相關API應該已經有產出了才對，幫我確認tasks.md，如果沒有的話請補上
21. 完成以下功能
    - 重新載入按鈕已經有了，但是載入的API完全沒帶回正確資料，按鈕的部分是否可以幫我優化，改寫成統一的components，呼叫的時候帶入資訊即可
    - 資料更新管理中的歷史資料更新，為甚麼沒有打API，也沒有爬取該股票的所有歷史資料，另外，幫我加入更新所有股票歷史資料的功能，且記得，不要有重複的資料
22. 完成以下功能
    - 增量更新是甚麼意思，按鈕幫我加一個問號，滑上去可以顯示說明
    - 第21點改完以後出現error caught during app initialization TypeError: can't access property "beforeEach", (intermediate value)() is undefined
23. 完成以下功能
    - 增量更新的按鈕變高了，幫我恢復成原先的樣式
    - 更新所有股票似乎無法正常執行，幫我寫TDD確保這支API能正常運行，並且因為這個功能可能會跑比較久，幫我記錄執行時間
24. 目前歷史資料管理的重新整理功能，似乎沒有打任何API，那歷史資料筆數又是從哪裡來的，總股票數是不是錯的，我看資料更新中是有股票的，股票清單管理的股票列表幫我顯示所有資料庫的資料
25. 更新所有股票的功能是失效的，更新單筆資料也是，並請確認資料管理的歷史資料是正常可以查詢資料庫的資料的，開始日期與結束日期請預設為當天
26. 這支API有問題/api/v1/stocks/update-all，Input should be a valid list，如果redis會影響，就把服務起起來吧，記得更新所有相關文件，並確認啟用後功能可以正常，我點了更新所有股票觸發他還是顯示422，FetchError: [GET] "http://localhost:9127/api/v1/data/history/stocks-with-data?limit=9999": 422 Unprocessable Entity
27. 目前專案中有爬取歷史資料的功能了，幫我更新上前端對應，並確保可以使用，為甚麼亂調我的對外PORT，請依據.env處理
28. 完成以下功能
    - 為甚麼我看到docker還有沒有用.env的PORT的服務
    - 執行這支API的時候，Stock crawl failed: 
29. 檢查專案中每一支有使用到的api，確保api測試都通過
30. 資料更新管理中，有一個開始更新的按鈕，幫我追查他後續執行了哪些動作，並針對這項功能提出建議
31. 先幫我更新目前這支檔案的順序，請依序往下排列，有幾個重複了，請調整編號即可，不用判斷內容
32. 很好，針對30點給的建議，他的按鈕動作錯了，應該使用第11點建置的爬蟲功能才對，如果這個功能可以優化成批次爬蟲，或已存在，請幫我調整成這個功能，不要用其他API去爬歷史股價
33. 針對30點的按鈕，開始執行後，是不是應該在任務管理的手動執行與執行紀錄應該可以看見，手動執行應該要可以看到目前的執行進度，幫我加上這一段
34. 幫我查詢一下目前適用甚麼方式在執行更新的
35. 有辦法多執行續去優化功能嗎
36. 我目前在歷史資料管理中有看到總股票數，但是不是沒有地方可以看到目前有資料的股票有哪些?
37. 你改完之後前端就掛了，幫我確認36點改了甚麼，修正直到可以正常運行
38. 完成以下功能
    - 寫入資料的部分似乎是有問題的，他的資料是開、高、低、收、總量，確認是否有存錯資料的問題，另外有資料的股票清單幫我用datatable來顯示，好看一點
    - 針對30點按鈕的功能，有辦法多執行續去優化功能嗎
    - 另外，執行紀錄請寫入資料表中，無論是否有執行完成，我要看到每一次的紀錄
    - 有資料的股票清單幫我改成可以收折
39. 完成以下功能
    - Broker爬蟲批次更新股票資料，這個任務，幫我調整一下，如果系統中已經有該股票的資料，且最後一筆更新日期已經是最新的，那就不用再更新了，這樣比較節省時間
    - 然後為甚麼用優化後的下去更新，總資料筆數卻都沒有更新
    - 有資料的股票清單，幫我預設用股票代號遞增，並且需要加入頁碼的功能，操作的部分用icon表示，滑上去才顯示功能文字
40. 我昨天睡覺前還有資料，今天打開就全部不見了，連API也是一堆錯誤，幫我檢查39點改了些甚麼，以及，docker-compose的資料庫volumn資料夾是不是不存在，導致資料沒有永久儲存
41. 完成以下功能
    - postgre幫我加入類似phpmyadmin的線上查看資料庫的服務，我記得pg有一個
    - 我點了有資料的股票清單，點查詢資料卻沒有資料，是否有資料或是邏輯的錯誤
42. 完成以下功能
    - 我發現，目前爬回來的資料有一個問題，資料筆數都非常少，以2330來說好了，只有88檔幾乎是不可能的事情，我有看到你有一個有資料的股票清單，他有一個更新按鈕，能幫我點下去後執行單筆更新，並且提供完整的執行路徑嗎，包含取到的資料為何，每個步驟怎麼拆解，最後完成是怎麼樣的資料寫入資料庫的
43. 完成以下功能
    - 幫我追查優化後的執行邏輯，我需要超詳細版，目前總股票數有638，有資料的卻只有20檔，資料庫中有2330，我在這20檔中卻沒看到，到底是哪裡的問題，我需要逐步排查
44. 又有CORS的問題了，我用localhost:
45. 我用/data/update的爬取資料，根本就沒有正常抓資料，幫我確認是否用前面8個broker的方式更新，並且需要確認資料的正確性，執行完成後幫我用2330檢查，他最新日期應該會是今天，且有很多筆資料，"雖然解析的資料筆數（159筆）可能未完涵蓋broker提供的6年完整資料"，我要的是完整的資料，不要漏掉任何一筆，我注意到你說有"價格縮放邏輯"，這啥，請幫我移除他，我從頭到尾要的就只有完整資料，不要給我亂加東西
46. 歷史資料的比數是對了，但資料似乎是錯的，請幫我確認資料爬取的邏輯是不是有問題，2330最高也才1200多，你怎麼爬到破萬的
47. 完成以下功能
    - 為甚麼有資料的股票清單沒有1101，我去單一股票資料更新也沒辦法更新1101，他都會顯示處理0筆資料
    - add commit push
    - 前端專案中有個頁面是data，請幫我改名，並把所有有用到的地方一併修正
    - add commit push
48. 幫我移除那個智能跳過機制判斷
